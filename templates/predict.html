@app.route("/predict", methods=["GET", "POST"])
@login_required
def predict():
    form = StrokeForm()
    prediction = None

    if form.validate_on_submit():
        # Dummy prediction logic
        age = form.age.data
        glucose = form.avg_glucose_level.data
        bmi = form.bmi.data

        if age > 60 or glucose > 150 or bmi > 30:
            prediction = "High Risk of Stroke ðŸ˜Ÿ"
        else:
            prediction = "Low Risk of Stroke ðŸ™‚"

        # Save patient data to MongoDB
        patient_data = {
            "user_id": current_user.id,
            "gender": form.gender.data,
            "age": age,
            "hypertension": form.hypertension.data,
            "heart_disease": form.heart_disease.data,
            "ever_married": form.ever_married.data,
            "work_type": form.work_type.data,
            "residence_type": form.Residence_type.data,
            "avg_glucose_level": glucose,
            "bmi": bmi,
            "smoking_status": form.smoking_status.data,
            "prediction": prediction
        }
        patients_collection.insert_one(patient_data)

    return render_template("predict.html", form=form, prediction=prediction)
